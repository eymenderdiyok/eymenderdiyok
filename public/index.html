<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>Eymen Derdiyok Games</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <style>
    :root{--bg:#f5f5f7;--card:#fff;--border:#e5e5ea;--text:#1c1c1e;--sub:#6e6e73}
    *{box-sizing:border-box;margin:0;padding:0;font-family:Inter,-apple-system,BlinkMacSystemFont,sans-serif}
    body{background:var(--bg);color:var(--text);min-height:100vh}
    header{height:70px;background:rgba(255,255,255,.8);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;padding:0 28px}
    .logo{display:flex;align-items:center;gap:14px}
    .logo img{width:38px;height:38px;border-radius:50%}
    .logo h1{font-size:18px;font-weight:600}
    .user{font-size:14px;color:var(--sub)}
    main{padding:40px;max-width:1200px;margin:auto}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:24px}
    .game{height:150px;border-radius:18px;border:1px solid var(--border);background:linear-gradient(135deg,#f2f2f2,#e6e6e6);display:flex;align-items:center;justify-content:center;color:#9e9ea3}
    footer{text-align:center;padding:40px 20px;color:var(--sub);font-size:13px}

    .overlay{position:fixed;inset:0;background:rgba(0,0,0,.4);backdrop-filter:blur(8px);display:none;align-items:center;justify-content:center}
    .modal{background:#fff;border-radius:22px;padding:28px;width:92%;max-width:420px}
    .tabs{display:flex;gap:10px;margin-bottom:14px}
    .tab{flex:1;padding:10px;border-radius:12px;border:1px solid var(--border);background:#f2f2f7;cursor:pointer}
    .tab.active{background:#fff;border-color:#000}
    .btn{width:100%;padding:14px;border-radius:12px;border:1px solid var(--border);background:#fff;margin-bottom:10px;cursor:pointer}
    .btn.black{background:#000;color:#fff;border:none}
    .input{width:100%;padding:14px;border-radius:12px;border:1px solid var(--border);margin-bottom:10px}
    .small{font-size:12px;color:var(--sub);text-align:center}
  </style>
</head>
<body>

<header>
  <div class="logo">
    <img src="https://image2url.com/r2/default/images/1770412554126-dc2c1693-a940-47a7-9e53-6e1524fc219c.png" />
    <h1>Eymen Derdiyok Games</h1>
  </div>
  <div class="user" id="user">Misafir</div>
</header>

<main>
  <div class="grid">
    <div class="game">Yakında</div>
    <div class="game">Yakında</div>
    <div class="game">Yakında</div>
  </div>
</main>

<footer>eymenderdiyok.com.tr</footer>

<div class="overlay" id="auth">
  <div class="modal">
    <div class="tabs">
      <button class="tab active" onclick="showTab('login')">Giriş</button>
      <button class="tab" onclick="showTab('register')">Kayıt Ol</button>
    </div>

    <div id="login">
      <button class="btn" onclick="oauth('google')">Google ile giriş</button>
      <button class="btn" onclick="oauth('apple')">Apple ile giriş</button>
      <input class="input" id="loginEmail" placeholder="E-posta" />
      <button class="btn black" onclick="sendLoginCode()">Mail ile kod gönder</button>
      <input class="input" id="loginCode" placeholder="6 haneli kod" />
      <button class="btn" onclick="verifyLoginCode()">Kodu doğrula</button>
      <button class="btn" onclick="guestLogin()">Misafir olarak gir</button>
    </div>

    <div id="register" style="display:none">
      <button class="btn" onclick="oauth('google')">Google ile kayıt</button>
      <button class="btn" onclick="oauth('apple')">Apple ile kayıt</button>
      <input class="input" id="registerEmail" placeholder="E-posta" />
      <button class="btn black" onclick="sendRegisterCode()">Mail ile kayıt (kod)</button>
      <p class="small">Mailine 6 haneli kod gönderilir</p>
    </div>
  </div>
</div>

<script>
  const supabaseUrl = 'https://yzmnllfpnsepxnfjmlzk.supabase.co'
  const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl6bW5sbGZwbnNlcHhuZmptbHprIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAzOTY5MjgsImV4cCI6MjA4NTk3MjkyOH0.Pj3AEPuw7gjbfWQPnrmf5YlgaGoNPZ-pGu9gn8vsAPk'

  const supabaseClient = supabase.createClient(supabaseUrl, supabaseKey)

  const authBox = document.getElementById('auth')
  const userText = document.getElementById('user')

  supabaseClient.auth.getSession().then(({ data }) => {
    if (!data.session) authBox.style.display = 'flex'
    else userText.innerText = data.session.user.email
  })

  function showTab(tab) {
    document.getElementById('login').style.display = tab === 'login' ? 'block' : 'none'
    document.getElementById('register').style.display = tab === 'register' ? 'block' : 'none'
    document.querySelectorAll('.tab').forEach((b, i) => {
      b.classList.toggle('active', (tab === 'login' && i === 0) || (tab === 'register' && i === 1))
    })
  }

  async function oauth(provider) {
    await supabaseClient.auth.signInWithOAuth({ provider })
  }

  async function sendLoginCode() {
    const email = document.getElementById('loginEmail').value
    await supabaseClient.auth.signInWithOtp({ email })
    alert('Giriş kodu mailine gönderildi')
  }

  async function sendRegisterCode() {
    const email = document.getElementById('registerEmail').value
    await supabaseClient.auth.signInWithOtp({ email })
    alert('Kayıt kodu mailine gönderildi')
  }

  async function verifyLoginCode() {
    const email = document.getElementById('loginEmail').value
    const token = document.getElementById('loginCode').value

    const { data, error } = await supabaseClient.auth.verifyOtp({
      email,
      token,
      type: 'email'
    })

    if (error) return alert('Kod hatalı veya süresi doldu')

    userText.innerText = email
    authBox.style.display = 'none'
  }

  function guestLogin() {
    userText.innerText = 'Misafir'
    authBox.style.display = 'none'
  }
</script>

</body>
</html>
