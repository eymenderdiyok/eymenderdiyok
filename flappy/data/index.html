<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>Flappy Bird - Sade ve Hƒ±zlƒ±</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <style>
        /* Normal, her cihazda olan temiz fontlar */
        body { 
            margin: 0; width: 100%; height: 100vh; overflow: hidden; 
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; 
            background: #70c5ce; 
        }
        #Canvas { position: relative; width: 100%; height: 100%; cursor: pointer; }
        
        #Menu {
            position: absolute; inset: 0; background: #70c5ce;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            z-index: 300;
        }
        
        h1 { color: white; text-shadow: 3px 3px 0 #000; font-size: 48px; margin-bottom: 20px; }

        .mode-btn {
            width: 250px; padding: 15px; margin: 10px; border: 3px solid #000;
            border-radius: 12px; font-size: 22px; cursor: pointer; color: white;
            font-weight: 800; text-transform: uppercase; transition: 0.1s;
        }
        .mode-btn:active { transform: scale(0.95); }
        .easy { background: #2ecc71; }
        .normal { background: #f1c40f; }
        .hard { background: #e74c3c; }

        #Birdy {
            width: 40px; height: 30px; position: absolute; top: 50%; left: 20%;
            z-index: 150; font-size: 32px; display: flex; align-items: center; justify-content: center;
        }
        
        .Pipe { position: absolute; top: 0; left: 100%; width: 60px; background: #73bf2e; border: 3px solid #000; z-index: 10; }
        
        #Score { 
            position: absolute; top: 40px; width: 100%; text-align: center; 
            font-size: 70px; font-weight: 900; color: white; 
            text-shadow: 4px 4px 0 #000; z-index: 100; pointer-events: none;
        }
        
        #GameOver { 
            display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); 
            background: #ded895; border: 5px solid #000; padding: 40px; border-radius: 20px; 
            text-align: center; z-index: 400; font-weight: bold;
        }
        
        .restart-btn {
            background: #e67e22; border: 3px solid #000; color: white; 
            padding: 10px 30px; border-radius: 10px; cursor: pointer; 
            font-size: 20px; font-weight: bold; margin-top: 15px;
        }
    </style>
</head>
<body>

<div id="Menu">
    <h1>MOD SE√á</h1>
    <button class="mode-btn easy" onclick="initGame('easy')">KOLAY</button>
    <button class="mode-btn normal" onclick="initGame('normal')">NORMAL</button>
    <button class="mode-btn hard" onclick="initGame('hard')">ZOR</button>
</div>

<div id="Canvas">
    <div id="Score">0</div>
    <div id="Birdy">üê¶</div>
    
    <div id="GameOver">
        <h2 style="margin:0; font-size: 32px;">OYUN Bƒ∞TTƒ∞</h2>
        <p style="font-size: 24px;">SKORUN: <span id="FinalScore">0</span></p>
        <button class="restart-btn" onclick="location.reload()">TEKRAR DENE</button>
    </div>
</div>

<script>
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    function playNote(freq, type, duration) {
        try {
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = type;
            osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + duration);
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.start(); osc.stop(audioCtx.currentTime + duration);
        } catch(e) {}
    }

    let birdY = 50, velocity = 0, gravity = 0.52, score = 0, isLost = false, pipes = [];
    let gameLoop, gameStarted = false;
    let config = { gap: 35, pipeFrequency: 0.015, speed: 1.3 };

    function initGame(mode) {
        if(mode === 'easy') { config.gap = 48; config.pipeFrequency = 0.012; config.speed = 1.1; }
        if(mode === 'hard') { config.gap = 28; config.pipeFrequency = 0.025; config.speed = 2.0; }
        
        $('#Menu').fadeOut(300);
        gameStarted = true;
        setTimeout(startGame, 400);
    }

    function startGame() {
        gameLoop = setInterval(() => {
            if (isLost) return;
            velocity += gravity;
            birdY += velocity;
            $('#Birdy').css({ 'top': birdY + '%', 'transform': `rotate(${Math.min(velocity * 3, 90)}deg)` });
            if (Math.random() < config.pipeFrequency) createPipe();
            movePipes();
            if (birdY > 96 || birdY < -5) endGame();
        }, 30);
    }

    function createPipe() {
        let minH = 10;
        let topHeight = Math.random() * (100 - config.gap - (minH * 2)) + minH;
        let pipeId = Date.now();
        $('<div/>').addClass('Pipe').attr('id', 'top'+pipeId).css({ height: topHeight + '%', left: '100%' }).appendTo('#Canvas');
        $('<div/>').addClass('Pipe').attr('id', 'bot'+pipeId).css({ height: (100 - topHeight - config.gap) + '%', top: (topHeight + config.gap) + '%', left: '100%' }).appendTo('#Canvas');
        pipes.push({ id: pipeId, left: 100, scored: false, topH: topHeight });
    }

    function movePipes() {
        pipes.forEach((p, i) => {
            p.left -= config.speed;
            $(`#top${p.id}, #bot${p.id}`).css('left', p.left + '%');
            if (!p.scored && p.left < 20) {
                p.scored = true; score++; $('#Score').text(score);
                playNote(880, 'sine', 0.1);
            }
            if (p.left > 15 && p.left < 25) {
                if (birdY < p.topH || birdY > (p.topH + config.gap - 4)) endGame();
            }
            if (p.left < -20) {
                $(`#top${p.id}, #bot${p.id}`).remove();
                pipes.splice(i, 1);
            }
        });
    }

    function jump() {
        if (!gameStarted || isLost) return;
        if (audioCtx.state === 'suspended') audioCtx.resume();
        velocity = -5.0; 
        playNote(440, 'square', 0.05);
    }

    function endGame() {
        if (isLost) return;
        isLost = true;
        clearInterval(gameLoop);
        playNote(150, 'sawtooth', 0.4);
        $('#FinalScore').text(score);
        $('#GameOver').fadeIn(400);
    }

    $(document).on('mousedown touchstart keydown', (e) => {
        if (e.type === 'keydown' && e.which !== 32) return;
        if (e.target.tagName === 'BUTTON') return;
        e.preventDefault();
        jump();
    });
</script>
</body>
</html>
