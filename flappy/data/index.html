<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>Flappy Bird - Pro</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <style>
        @font-face {
            font-family: 'flappybird';
            src: url('https://db.onlinewebfonts.com/t/88c68837bc28bc89ab74977461994116.ttf') format('truetype');
        }
        
        body { margin: 0; width: 100%; height: 100vh; overflow: hidden; font-family: 'SF Pro Display', sans-serif; }
        #Canvas { position: relative; width: 100%; height: 100%; background: #70c5ce; cursor: pointer; }
        
        /* Ku≈üu bir div yerine emoji veya CSS ile √ßiziyoruz (Resim derdi olmasƒ±n diye) */
        #Birdy {
            width: 40px; height: 30px;
            position: absolute; top: 50%; left: 20%;
            z-index: 150; font-size: 30px;
            display: flex; align-items: center; justify-content: center;
            transition: transform 0.1s;
        }

        .Pipe {
            position: absolute; top: 0; left: 100%; width: 60px;
            background: #73bf2e; border: 2px solid #000; z-index: 10;
        }

        #Score {
            position: absolute; top: 20px; width: 100%; text-align: center;
            font-family: 'flappybird', Arial; font-size: 50px; color: white;
            text-shadow: 2px 2px 0 #000; z-index: 100;
        }

        #GameOver {
            display: none; position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%); background: #ded895;
            border: 3px solid #000; padding: 20px; border-radius: 15px;
            text-align: center; z-index: 200; font-family: 'flappybird', sans-serif;
        }
        
        .btn-reset {
            background: #e67e22; border: none; color: white;
            padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-top: 10px;
        }
    </style>
</head>
<body>

<div id="Canvas">
    <div id="Score">0</div>
    <div id="Birdy">üê¶</div>
    
    <div id="GameOver">
        <h2 style="margin:0">EYVAH!</h2>
        <p>SKOR: <span id="FinalScore">0</span></p>
        <button class="btn-reset" onclick="resetGame()">TEKRAR DENE</button>
    </div>
</div>

<script>
    // SES √úRETME FONKSƒ∞YONU (Dosyasƒ±z bip sesi)
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    function playNote(freq, type, duration) {
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.type = type;
        osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + duration);
        osc.connect(gain);
        gain.connect(audioCtx.destination);
        osc.start();
        osc.stop(audioCtx.currentTime + duration);
    }

    let birdY = 50;
    let velocity = 0;
    let gravity = 0.25;
    let score = 0;
    let isLost = false;
    let pipes = [];
    let gameLoop;

    function startGame() {
        gameLoop = setInterval(() => {
            if (isLost) return;
            
            // Yer√ßekimi
            velocity += gravity;
            birdY += velocity;
            $('#Birdy').css('top', birdY + '%');
            
            // D√∂n√º≈ü efekti
            let rotation = Math.min(velocity * 4, 90);
            $('#Birdy').css('transform', `rotate(${rotation}deg)`);

            // Boru √ºretimi
            if (Math.random() < 0.02) createPipe();

            // Boru hareketi ve √ßarpƒ±≈üma
            movePipes();

            // Sƒ±nƒ±r kontrol√º
            if (birdY > 95 || birdY < 0) endGame();

        }, 30);
    }

    function createPipe() {
        let gap = 30;
        let topHeight = Math.random() * 40 + 10;
        let pipeId = Date.now();
        
        // √úst Boru
        $('<div/>').addClass('Pipe').attr('id', 'top'+pipeId).css({
            height: topHeight + '%', left: '100%'
        }).appendTo('#Canvas');

        // Alt Boru
        $('<div/>').addClass('Pipe').attr('id', 'bot'+pipeId).css({
            height: (100 - topHeight - gap) + '%', 
            top: (topHeight + gap) + '%', 
            left: '100%'
        }).appendTo('#Canvas');

        pipes.push({ id: pipeId, left: 100, scored: false, topH: topHeight, gap: gap });
    }

    function movePipes() {
        pipes.forEach((p, index) => {
            p.left -= 1.5;
            $(`#top${p.id}, #bot${p.id}`).css('left', p.left + '%');

            // Skor
            if (!p.scored && p.left < 20) {
                p.scored = true;
                score++;
                $('#Score').text(score);
                playNote(880, 'sine', 0.1); // Skor sesi
            }

            // √áarpƒ±≈üma (Basit kutu kontrol√º)
            if (p.left > 15 && p.left < 25) {
                if (birdY < p.topH || birdY > (p.topH + p.gap - 5)) {
                    endGame();
                }
            }

            // Temizlik
            if (p.left < -10) {
                $(`#top${p.id}, #bot${p.id}`).remove();
                pipes.splice(index, 1);
            }
        });
    }

    function jump() {
        if (isLost) return;
        if (audioCtx.state === 'suspended') audioCtx.resume();
        velocity = -5;
        playNote(440, 'square', 0.05); // Zƒ±plama sesi
    }

    function endGame() {
        isLost = true;
        clearInterval(gameLoop);
        playNote(110, 'sawtooth', 0.3); // Kaybetme sesi
        $('#FinalScore').text(score);
        $('#GameOver').fadeIn();
    }

    function resetGame() {
        location.reload();
    }

    $(document).on('mousedown keydown', (e) => {
        if (e.type === 'keydown' && e.which !== 32) return;
        jump();
    });

    startGame();
</script>
</body>
</html>
